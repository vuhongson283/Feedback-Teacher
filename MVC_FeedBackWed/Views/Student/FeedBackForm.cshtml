<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Form</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .form-check-input {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border-width:2px;
        }

        .form-check-input:checked {
            transform: scale(1.2); 
            box-shadow: 0 0 8px rgba(33, 150, 243, 0.6); /* Hiệu ứng phát sáng */
         }

    </style>
</head>
<body style="padding-top: 3%;" class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow p-4">
                    <h4 class="fw-bold text-center mb-4">Please rate your experience</h4>

                    <!-- Form -->
                    
                        <input type="hidden" id="studentId" value="@ViewBag.StudentId" />
                        <input type="hidden" id="formId" value="@ViewBag.FormId" />
                        <div class="row">
                            <!-- Cột 1 -->
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <p class="fw-bold" id="question1" data-question-id="3">1. Regarding the teacher's punctuality</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1_1" value="Always punctual" data-question-id="3">
                                        <label class="form-check-label" for="q1_1">Always punctual</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1_2" value="Moostly punctual" data-question-id="3">
                                        <label class="form-check-label" for="q1_2">Moostly punctual</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1_3" value="Rarely punctual" data-question-id="3">
                                        <label class="form-check-label" for="q1_3">Rarely punctual</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1_4" value="Not at all punctual" data-question-id="3">
                                        <label class="form-check-label" for="q1_4">Not at all punctual</label>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <p class="fw-bold" id="question2" data-question-id="4">2. The teacher adequately covers the topics required by the syllabus</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2_1" value="Fully covered" data-question-id="4">
                                        <label class="form-check-label" for="q2_1">Fully covered</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2_2" value="Mostly covered" data-question-id="4">
                                        <label class="form-check-label" for="q2_2">Mostly covered</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2_3" value="Partially covered" data-question-id="4">
                                        <label class="form-check-label" for="q2_3">Partially covered</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2_4" value="Not at all covered" data-question-id="4">
                                        <label class="form-check-label" for="q2_4">Not at all covered</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <p class="fw-bold" id="question3" data-question-id="5">3. Teacher's response to student's questions in class</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3_1" value="Answered immediately or just after the session" data-question-id="5">
                                        <label class="form-check-label" for="q3_1">Answered immediately or just after the session</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3_2" value="Answered in the next session" data-question-id="5">
                                        <label class="form-check-label" for="q3_2">Answered in the next session</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3_3" value="Some queries left unanswered" data-question-id="5">
                                        <label class="form-check-label" for="q3_3">Some queries left unanswered</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3_4" value="Most queries left unanswered" data-question-id="5">
                                        <label class="form-check-label" for="q3_4">Most queries left unanswered</label>
                                    </div>
                                </div>
                                
                            </div>



                            <!-- Cột 2 -->
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <p class="fw-bold" id="question4" data-question-id="6">4. Teaching skills of teacher</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4_1" value="Very Good" data-question-id="6">
                                        <label class="form-check-label" for="q4_1">Very Good</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4_2" value="Good" data-question-id="6">
                                        <label class="form-check-label" for="q4_2">Good</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4_3" value="Average" data-question-id="6">
                                        <label class="form-check-label" for="q4_3">Average</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4_4" value="Poor" data-question-id="6">
                                        <label class="form-check-label" for="q4_4">Poor</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <p class="fw-bold" id="question5" data-question-id="7">5. Support from the teacher - guidance for practical exercises, answering questions out side of class</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5_1" value="Very Good" data-question-id="7">
                                        <label class="form-check-label" for="q5_1">Very Good</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5_2" value="Good" data-question-id="7">
                                        <label class="form-check-label" for="q5_2">Good</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5_3" value="Average" data-question-id="7">
                                        <label class="form-check-label" for="q5_3">Average</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5_4" value="Poor" data-question-id="7">
                                        <label class="form-check-label" for="q5_4">Poor</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <p class="fw-bold" id="question6" data-question-id="8">6. To what extent are you pleased with the quality and effectiveness of the lecturer's teaching and mentoring in your learning progress?</p>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q6" id="q6_1" value="Very Satisfied" data-question-id="8">
                                        <label class="form-check-label" for="q6_1">Very Satisfied</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q6" id="q6_2" value="Satisfied" data-question-id="8">
                                        <label class="form-check-label" for="q6_2">Satisfied</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q6" id="q6_3" value="Neutral" data-question-id="8">
                                        <label class="form-check-label" for="q6_3">Neutral</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q6" id="q6_4" value="Dissatisfied" data-question-id="8">
                                        <label class="form-check-label" for="q6_4">Dissatisfied</label>
                                    </div>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q6" id="q6_5" value="Very Dissatisfied" data-question-id="8">
                                        <label class="form-check-label" for="q6_5">Very Dissatisfied</label>
                                    </div>
                                </div>
                                
                                
                            </div>
                        </div>

                    <input data-question-id="9" type="text" id="comment" />

                        
                        <div class="text-end">
                            <button  class="btn btn-primary" id="submitBtn">Submit</button>
                        </div>
                    
                    <!-- End Form -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        
            $('#submitBtn').click(() => {
                const studentId = $('#studentId').val();
                const formId = $('#formId').val();
                const comment = $('#comment').val().trim(); 

                if (!studentId || !formId) {
                    alert("Missing Student ID or Form ID!");
                    return;
                }

                const answers = [];

                
                $('input[type="radio"]:checked').each(function () {
                    answers.push({
                        questionId: $(this).data("question-id"),
                        answer: $(this).val()
                    });
                });

                
                if (answers.length === 0) {
                    alert("Please answer all questions before submitting.");
                    return;
                }

               
                if (comment) {
                    answers.push({
                        questionId: 9, 
                        answer: comment
                    });
                }

                const body = {
                    studentId: parseInt(studentId),
                    formId: parseInt(formId),
                    answers: answers 
                };

                console.log("Request Data:", body);

                $.ajax({
                    url: "https://localhost:7087/api/Feedback/doFeedback",
                    type: "POST",
                    data: JSON.stringify(body),
                    contentType: "application/json",
                    success: (response) => {
                        alert("Feedback Submitted Successfully!");
                        console.log("Response:", response);
                        window.location.href = "/Student/FeedbackList";
                    },
                    error: (xhr, status, error) => {
                        alert("Error submitting feedback!");
                        console.error("AJAX Error:", error, xhr.responseText);
                    }
                });
            });
    </script>


    
    

    <script>
        document.querySelectorAll('.form-check-input').forEach(input => {
            input.addEventListener('change', function () {
                this.classList.add('active');
                setTimeout(() => this.classList.remove('active'), 150); 
            });
        });

    </script>
</body>
</html>
